<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Trawler Catch Manager</title>
  <style>
    body { font-family: Arial; padding: 20px; background:#f2f2f2; }
    h2 { text-align:center; }
    input, select, button {
      width:100%;
      padding:10px;
      margin:5px 0;
      font-size:16px;
    }
    table {
      width:100%;
      margin-top:20px;
      border-collapse: collapse;
      background:white;
    }
    th, td {
      padding:8px;
      border:1px solid #ccc;
      text-align:center;
    }
    button { background:#007bff; color:white; border:none; }
    button:hover { background:#0056b3; }
  </style>
</head>
<body>

<h2>ðŸš¢ Trawler Catch Manager</h2>

<label>Date</label>
<input type="date" id="date">

<label>Crew Member</label>
<select id="crew"></select>

<label>Tonnage (tons)</label>
<input type="number" id="tons" placeholder="Enter tons">

<label>Fish Type</label>
<select id="fish"></select>

<label>Factory</label>
<select id="factory"></select>

<button onclick="addEntry()">Add Catch</button>

<table id="table">
  <tr>
    <th>Date</th>
    <th>Crew</th>
    <th>Fish</th>
    <th>Factory</th>
    <th>Tons</th>
  </tr>
</table>

<h3>Monthly Totals</h3>
<table id="totalsTable">
  <tr>
    <th>Crew</th>
    <th>Total Tons</th>
  </tr>
</table>

<script>

// ================== DATA STORAGE ==================
let entries = JSON.parse(localStorage.getItem("entries")) || [];

// ===== EDIT THESE LISTS ANYTIME =====
const crewList = [
  "Atlantic Leader",
  "Crew 2",
  "Crew 3"
];

const fishList = [
  "Redeye",
  "Sardines",
  "Anchovies"
];

const factoryList = [
  "Westpoint",
  "Amawandle",
  "Stompneus"
];
// =====================================


// Populate dropdowns
function populateDropdown(id, list, placeholder) {
  const select = document.getElementById(id);
  select.innerHTML = `<option value="">${placeholder}</option>`;

  list.forEach(item => {
    select.innerHTML += `<option>${item}</option>`;
  });
}


// Render tables
function renderTable() {
  const table = document.getElementById("table");
  const totalsTable = document.getElementById("totalsTable");

  table.innerHTML = `
    <tr>
      <th>Date</th>
      <th>Crew</th>
      <th>Fish</th>
      <th>Factory</th>
      <th>Tons</th>
    </tr>
  `;

  totalsTable.innerHTML = `
    <tr>
      <th>Crew</th>
      <th>Total Tons</th>
    </tr>
  `;

  let totals = {};

  entries.forEach((e) => {
    table.innerHTML += `
      <tr>
        <td>${e.date}</td>
        <td>${e.crew}</td>
        <td>${e.fish}</td>
        <td>${e.factory}</td>
        <td>${e.tons}</td>
      </tr>
    `;

    if (!totals[e.crew]) {
      totals[e.crew] = 0;
    }

    totals[e.crew] += parseFloat(e.tons);
  });

  for (let crew in totals) {
    totalsTable.innerHTML += `
      <tr>
        <td>${crew}</td>
        <td>${totals[crew].toFixed(2)}</td>
      </tr>
    `;
  }
}


// Add entry
function addEntry() {
  const date = document.getElementById("date").value;
  const crew = document.getElementById("crew").value;
  const tons = document.getElementById("tons").value;
  const fish = document.getElementById("fish").value;
  const factory = document.getElementById("factory").value;

  if (!date || !crew || !tons || !fish || !factory) {
    alert("Fill in all fields");
    return;
  }

  entries.push({ date, crew, tons, fish, factory });
  localStorage.setItem("entries", JSON.stringify(entries));

  document.getElementById("date").value = "";
  document.getElementById("crew").value = "";
  document.getElementById("tons").value = "";
  document.getElementById("fish").value = "";
  document.getElementById("factory").value = "";

  renderTable();
}


// Initialize
populateDropdown("crew", crewList, "Select Crew");
populateDropdown("fish", fishList, "Select Fish");
populateDropdown("factory", factoryList, "Select Factory");

renderTable();

</script>

</body>
</html>
