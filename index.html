<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Trawler Catch Manager</title>

<style>
body{
  font-family:Arial;
  background:#121212;
  color:white;
  padding:10px;
  font-size:14px;
}

h2{
  text-align:center;
  font-size:18px;
  margin-bottom:15px;
}

/* Collapsible */
.collapsible{
  background:#1f1f1f;
  padding:10px;
  border-radius:8px;
  margin-bottom:10px;
}

.collapsible h3{
  margin:0;
  font-size:15px;
  cursor:pointer;
}

.content{
  margin-top:10px;
  display:block;
}

/* Inputs */
input,select,button{
  width:100%;
  padding:8px;
  margin:4px 0;
  font-size:13px;
  border-radius:6px;
  border:none;
}

button{
  background:#007bff;
  color:white;
}

button:hover{
  opacity:0.9;
}

.deleteBtn{
  background:#b30000;
  padding:6px;
  font-size:12px;
}

/* Table */
.tableContainer{
  overflow-x:auto;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:8px;
  background:#1f1f1f;
  font-size:12px;
  min-width:600px;
}

th,td{
  padding:6px;
  border:1px solid #333;
  text-align:center;
}

/* Dashboard */
.dashboardBox{
  background:#007bff;
  padding:6px;
  border-radius:6px;
  margin:4px 0;
  text-align:center;
  font-weight:bold;
  font-size:13px;
}
</style>
</head>

<body>

<h2>Trawler Catch Manager</h2>

<!-- DASHBOARD -->
<div class="collapsible">
<h3 onclick="toggleSection(this)">Dashboard ▼</h3>
<div class="content" id="dashboard"></div>
</div>

<!-- ADD CREW -->
<div class="collapsible">
<h3 onclick="toggleSection(this)">Add Crew ▼</h3>
<div class="content">
<input id="crewName" placeholder="Crew Name">
<button onclick="addCrew()">Add Crew</button>
</div>
</div>

<!-- ADD CATCH -->
<div class="collapsible">
<h3 onclick="toggleSection(this)">Add Catch ▼</h3>
<div class="content">
<select id="crewSelect"></select>

<select id="fishType">
<option>Redeye</option>
<option>Sardines</option>
<option>Anchovies</option>
</select>

<select id="factory">
<option>Westpoint</option>
<option>Amawandle</option>
<option>Stompneus</option>
</select>

<input type="number" id="tonnage" placeholder="Tonnage">
<input type="date" id="date">
<button onclick="addCatch()">Add Catch</button>
</div>
</div>

<!-- CATCH TABLE -->
<div class="collapsible">
<h3 onclick="toggleSection(this)">Catch Records ▼</h3>
<div class="content">
<div class="tableContainer">
<table id="catchTable">
<thead>
<tr>
<th>Crew</th>
<th>Fish</th>
<th>Factory</th>
<th>Tons</th>
<th>Date</th>
<th>Delete</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
</div>

<script>
let crew = JSON.parse(localStorage.getItem("crew")) || [];
let catches = JSON.parse(localStorage.getItem("catches")) || [];

function saveData(){
  localStorage.setItem("crew", JSON.stringify(crew));
  localStorage.setItem("catches", JSON.stringify(catches));
}

function toggleSection(element){
  const content = element.nextElementSibling;
  if(content.style.display === "none"){
    content.style.display = "block";
    element.innerHTML = element.innerHTML.replace("▲","▼");
  } else {
    content.style.display = "none";
    element.innerHTML = element.innerHTML.replace("▼","▲");
  }
}

function addCrew(){
  const name = document.getElementById("crewName").value;
  if(name){
    crew.push(name);
    document.getElementById("crewName").value="";
    saveData();
    loadCrew();
  }
}

function loadCrew(){
  const select = document.getElementById("crewSelect");
  select.innerHTML="";
  crew.forEach(member=>{
    const option=document.createElement("option");
    option.text=member;
    select.add(option);
  });
  loadDashboard();
}

function addCatch(){
  const crewMember=document.getElementById("crewSelect").value;
  const fish=document.getElementById("fishType").value;
  const factory=document.getElementById("factory").value;
  const tonnage=document.getElementById("tonnage").value;
  const date=document.getElementById("date").value;

  if(crewMember && tonnage && date){
    catches.push({crewMember,fish,factory,tonnage,date});
    saveData();
    document.getElementById("tonnage").value="";
    loadTable();
  }
}

function loadTable(){
  const tbody=document.querySelector("#catchTable tbody");
  tbody.innerHTML="";
  catches.forEach((item,index)=>{
    const row=tbody.insertRow();
    row.innerHTML=`
      <td>${item.crewMember}</td>
      <td>${item.fish}</td>
      <td>${item.factory}</td>
      <td>${item.tonnage}</td>
      <td>${item.date}</td>
      <td><button class="deleteBtn" onclick="deleteCatch(${index})">X</button></td>
    `;
  });
  loadDashboard();
}

function deleteCatch(index){
  catches.splice(index,1);
  saveData();
  loadTable();
}

function loadDashboard(){
  const dashboard=document.getElementById("dashboard");
  dashboard.innerHTML="";
  let totals={};
  catches.forEach(item=>{
    if(!totals[item.crewMember]){
      totals[item.crewMember]=0;
    }
    totals[item.crewMember]+=parseFloat(item.tonnage);
  });
  for(const member in totals){
    const div=document.createElement("div");
    div.className="dashboardBox";
    div.innerText=member+" : "+totals[member]+" tons";
    dashboard.appendChild(div);
  }
}

loadCrew();
loadTable();
</script>

</body>
</html>
